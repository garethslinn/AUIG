<h3 id="3.8">3.8 Accordions</h3>
<p>Accordions are UI components that allow users to expand and collapse content sections, making it easier to present large amounts of information in a compact space. Ensuring accordions are accessible is critical for providing an inclusive experience for all users.</p>

<h4 id="3.8.1">3.8.1 Semantic Markup</h4>
<p>Use semantic HTML with proper ARIA roles and attributes to create accessible accordions. Each accordion header should be a button with <code>aria-expanded</code>, and its content section should be associated using <code>aria-controls</code>.</p>
<pre>
<code class="language-html">
<!-- Accessible Accordion -->
<div id="accordion">
    <h3>
        <button aria-expanded="false" aria-controls="section1" id="header1">Section 1</button>
    </h3>
    <div id="section1" role="region" aria-labelledby="header1" hidden>
        <p>Content for Section 1.</p>
    </div>
    <h3>
        <button aria-expanded="false" aria-controls="section2" id="header2">Section 2</button>
    </h3>
    <div id="section2" role="region" aria-labelledby="header2" hidden>
        <p>Content for Section 2.</p>
    </div>
</div>
</code>
</pre>

<h4 id="3.8.2">3.8.2 Keyboard Accessibility</h4>
<p>Ensure accordions are fully operable using the keyboard. Users should be able to navigate between headers using the <kbd>Tab</kbd> key and expand or collapse sections using the <kbd>Enter</kbd> or <kbd>Space</kbd> keys.</p>
<pre>
<code class="language-javascript">
// Keyboard Navigation for Accordions
const accordionHeaders = document.querySelectorAll('#accordion button');

accordionHeaders.forEach((header) => {
    header.addEventListener('click', () => toggleAccordion(header));
    header.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            toggleAccordion(header);
        }
    });
});

function toggleAccordion(header) {
    const isExpanded = header.getAttribute('aria-expanded') === 'true';
    header.setAttribute('aria-expanded', !isExpanded);
    const section = document.getElementById(header.getAttribute('aria-controls'));
    section.hidden = isExpanded;
}
</code>
</pre>

<h4 id="3.8.3">3.8.3 ARIA Attributes</h4>
<p>Use ARIA attributes to enhance the accessibility of accordions. Apply <code>aria-expanded</code> on headers to indicate their state, and use <code>role="region"</code> for content sections to define them as accessible regions.</p>
<pre>
<code class="language-html">
<!-- Accordion with ARIA Attributes -->
<h3>
    <button aria-expanded="true" aria-controls="content1" id="header1">Item 1</button>
</h3>
<div id="content1" role="region" aria-labelledby="header1">
    <p>Details for Item 1.</p>
</div>
<h3>
    <button aria-expanded="false" aria-controls="content2" id="header2">Item 2</button>
</h3>
<div id="content2" role="region" aria-labelledby="header2" hidden>
    <p>Details for Item 2.</p>
</div>
</code>
</pre>

<h4 id="3.8.4">3.8.4 Responsive Design</h4>
<p>Ensure accordions are responsive and adapt to different screen sizes. Consider styling them for both desktop and mobile layouts.</p>
<pre>
<code class="language-css">
/* Basic Accordion Styles */
#accordion h3 {
    margin: 0;
}

#accordion button {
    width: 100%;
    text-align: left;
    background-color: #f9f9f9;
    border: 1px solid #ccc;
    padding: 1rem;
    font-size: 1rem;
    cursor: pointer;
}

#accordion button[aria-expanded="true"] {
    background-color: #005fcc;
    color: white;
}

#accordion div {
    padding: 1rem;
    border: 1px solid #ccc;
    border-top: none;
}
</code>
</pre>

<h4 id="3.8.5">3.8.5 Visible Focus Indicators</h4>
<p>Provide clear focus indicators for accordion headers to help keyboard users identify the currently focused element.</p>
<pre>
<code class="language-css">
/* Focus Styles for Accordion Buttons */
#accordion button:focus {
    outline: 2px solid #005fcc;
    background-color: #e0f0ff;
}
</code>
</pre>

<h4 id="3.8.6">3.8.6 Testing Accordions for Accessibility</h4>
<p>Test accordions with assistive technologies to ensure they are accessible. Verify proper use of ARIA attributes, keyboard navigation, and focus management.</p>
<pre>
<code class="language-html">
// Test Checklist
// - Verify that accordion headers are keyboard operable.
// - Ensure ARIA roles and attributes are correctly implemented.
// - Check screen reader announcements for headers and content sections.
// - Validate visible focus indicators for headers.
</code>
</pre>

<h4>Best Practices for Accordions</h4>
<ul>
    <li><strong>Use Semantic Markup:</strong> Structure accordions with headers and content sections, using ARIA attributes to indicate states.</li>
    <li><strong>Ensure Keyboard Accessibility:</strong> Allow users to navigate and operate accordions using only the keyboard.</li>
    <li><strong>Provide Clear ARIA Roles:</strong> Use attributes like <code>aria-expanded</code>, <code>aria-controls</code>, and <code>role="region"</code> for accessibility.</li>
    <li><strong>Design for Responsiveness:</strong> Ensure accordions adapt to different screen sizes and layouts.</li>
    <li><strong>Provide Visible Focus Indicators:</strong> Highlight the currently focused header for better usability.</li>
    <li><strong>Test Thoroughly:</strong> Regularly test accordions with assistive technologies and automated tools to identify and resolve issues.</li>
</ul>
